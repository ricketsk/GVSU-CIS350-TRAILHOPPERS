#:import FirebaseLoginScreen firebaseloginscreen.firebaseloginscreen.FirebaseLoginScreen

ScreenManager:
    id: screen_manager
    FirebaseLoginScreen:
        id: firebase_login_screen
        name: "firebase_login_screen"
        debug: True
        remember_user: True
        require_email_verification: True
        web_api_key: "AIzaSyCpXA55IalmjiZnRWqloBUYlktrjI8l0eI" # This should be YOUR web_api_key
        background: "background.jpg"
        on_login_success:
            if self.login_state == 'in': print("User has logged in. Unique identifier is ", self.localId)
            if self.login_state == 'out': print("User signed out")

            if self.login_state == 'in': app.local_id = self.localId
            if self.login_state == 'in': app.user_idToken = self.idToken
            #if self.login_state == 'in': app.display_user_tokens()
            if self.login_state == 'in': screen_manager.current = 'example_screen'



    Screen:
        id: example_screen
        name: "example_screen"
        BoxLayout:
            orientation: 'horizontal'
            MDBottomNavigation:
                panel_color: .2, .2, .2, .2

                MDBottomNavigationItem:
                    name: 'screen 2'
                    text: 'SEARCH'
                    icon: 'magnify'
                    # on_enter: root.switch()     
                    FloatLayout:
                        MDRectangleFlatButton:
                            text: app.list2[0]
                            pos_hint: {"center_x": .5, "center_y": .95}
                        MDRectangleFlatButton:
                            text: app.list2[1]
                            pos_hint: {"center_x": .5, "center_y": .85}
                        MDRectangleFlatButton:
                            text: app.list2[2]
                            pos_hint: {"center_x": .5, "center_y": .75}
                        MDRectangleFlatButton:
                            text: app.list2[3]
                            pos_hint: {"center_x": .5, "center_y": .65}
                        MDRectangleFlatButton:
                            text: app.list2[4]
                            pos_hint: {"center_x": .5, "center_y": .55}
                        MDRectangleFlatButton:
                            text: app.list2[5]
                            pos_hint: {"center_x": .5, "center_y": .45}
                        MDRectangleFlatButton:
                            text: app.list2[6]
                            pos_hint: {"center_x": .5, "center_y": .35}
                        MDRectangleFlatButton:
                            text: app.list2[7]
                            pos_hint: {"center_x": .5, "center_y": .25}
                        MDRectangleFlatButton:
                            text: app.list2[8]
                            pos_hint: {"center_x": .5, "center_y": .15}
                        MDRectangleFlatButton:
                            text: app.list2[9]
                            pos_hint: {"center_x": .5, "center_y": .05}
                            
                        
                MDBottomNavigationItem:
                    name: 'screen 1'
                    text: 'HOME'   
                    icon: 'home-variant-outline'
                    MapView:
                        lat: app.lat
                        lon: app.lon
                        zoom: 12
                        double_tap_zoom: True
                        MapMarkerPopup:
                            source: "map-marker.png"
                            lat: app.lat
                            lon: app.lon

                MDBottomNavigationItem:
                    name: 'screen 3'
                    text: 'PROFILE'
                    icon: 'account-circle-outline'
                    MDLabel:
                        text: 'Profile Info Here'
                        halign: 'center'
                    BoxLayout:
                        orientation: 'vertical'
                        MDRaisedButton:
                            
                            text: "Log out"
                            on_release:
                                app.sign_out()